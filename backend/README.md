# Shiwuæ ¡å›­äºŒæ‰‹äº¤æ˜“å¹³å° - åç«¯API

## ğŸ“‹ APIæ–‡æ¡£

å®Œæ•´çš„APIæ–‡æ¡£è¯·æŸ¥çœ‹ï¼š**[API_Documentation.md](./API_Documentation.md)**

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å¯åŠ¨æœåŠ¡å™¨

```bash
# ç¼–è¯‘é¡¹ç›®
mvn clean compile

# è¿è¡ŒæœåŠ¡å™¨
mvn exec:java -Dexec.mainClass="com.shiwu.Application"
```

### è®¿é—®åœ°å€

- **APIåŸºç¡€åœ°å€**: http://localhost:8080
- **APIæ–‡æ¡£**: [API_Documentation.md](./API_Documentation.md)

## ğŸ“Š APIæ¦‚è§ˆ

### æ ¸å¿ƒæ¨¡å—

| æ¨¡å— | åŸºç¡€è·¯å¾„ | æè¿° |
|------|---------|------|
| ç”¨æˆ·æ¨¡å— | `/api/user/` | ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€èµ„æ–™ç®¡ç†ã€å…³æ³¨åŠŸèƒ½ |
| å•†å“æ¨¡å— | `/api/products/` | å•†å“å‘å¸ƒã€æŸ¥è¯¢ã€ç¼–è¾‘ã€å›¾ç‰‡ä¸Šä¼  |
| åˆ†ç±»æ¨¡å— | `/api/categories/` | å•†å“åˆ†ç±»ç®¡ç† |
| æ¶ˆæ¯æ¨¡å— | `/api/messages/` | ç§ä¿¡èŠå¤©ã€ä¼šè¯ç®¡ç† |
| è®¢å•æ¨¡å— | `/api/orders/` | è®¢å•åˆ›å»ºã€çŠ¶æ€ç®¡ç†ã€å‘è´§æ”¶è´§ |
| è´­ç‰©è½¦æ¨¡å— | `/api/cart/` | è´­ç‰©è½¦å•†å“ç®¡ç† |
| è¯„ä»·æ¨¡å— | `/api/reviews/` | å•†å“è¯„ä»·ã€è¯„åˆ†ç»Ÿè®¡ |
| æ”¯ä»˜æ¨¡å— | `/api/payments/` | æ”¯ä»˜åˆ›å»ºã€å¤„ç†ã€çŠ¶æ€æŸ¥è¯¢ |

### ç®¡ç†å‘˜æ¨¡å—

| æ¨¡å— | åŸºç¡€è·¯å¾„ | æè¿° |
|------|---------|------|
| ç®¡ç†å‘˜è®¤è¯ | `/api/admin/login` | ç®¡ç†å‘˜ç™»å½• |
| ä»ªè¡¨ç›˜ | `/api/admin/dashboard` | ç»Ÿè®¡æ•°æ®å±•ç¤º |
| ç”¨æˆ·ç®¡ç† | `/api/admin/users/` | ç”¨æˆ·æŸ¥è¯¢ã€å°ç¦ç®¡ç† |
| å•†å“ç®¡ç† | `/api/admin/products/` | å•†å“å®¡æ ¸ã€ä¸‹æ¶ç®¡ç† |
| å®¡è®¡æ—¥å¿— | `/api/admin/audit-logs/` | ç³»ç»Ÿæ“ä½œæ—¥å¿—æŸ¥è¯¢ |
| æ”¯ä»˜è¶…æ—¶ç®¡ç† | `/api/payment-timeout/` | æ”¯ä»˜è¶…æ—¶æ£€æŸ¥å’Œå¤„ç† |

## ğŸ” è®¤è¯æ–¹å¼

### JWT Tokenè®¤è¯

å¤§éƒ¨åˆ†APIéœ€è¦åœ¨è¯·æ±‚å¤´ä¸­æºå¸¦JWT Tokenï¼š

```http
Authorization: Bearer {your_jwt_token}
```

### è·å–Token

1. **ç”¨æˆ·Token**: é€šè¿‡ `POST /api/user/login` è·å–
2. **ç®¡ç†å‘˜Token**: é€šè¿‡ `POST /api/admin/login` è·å–

## ğŸ“ å“åº”æ ¼å¼

æ‰€æœ‰APIéƒ½éµå¾ªç»Ÿä¸€çš„å“åº”æ ¼å¼ï¼š

```json
{
  "success": true,
  "data": {},
  "error": {
    "code": "é”™è¯¯ä»£ç ",
    "message": "é”™è¯¯ä¿¡æ¯",
    "userTip": "ç”¨æˆ·æç¤º"
  },
  "message": "å“åº”æ¶ˆæ¯"
}
```

## ğŸ§ª æµ‹è¯•

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
mvn test

# è¿è¡Œç‰¹å®šæ¨¡å—æµ‹è¯•
mvn test -Dtest="*ControllerTest"
```

### æµ‹è¯•è¦†ç›–ç‡

- **æ€»æµ‹è¯•ç”¨ä¾‹**: 351ä¸ª
- **æµ‹è¯•é€šè¿‡ç‡**: 100% âœ…
- **æ¨¡å—è¦†ç›–ç‡**: 100%

## ğŸ“ é¡¹ç›®ç»“æ„

```
backend/
â”œâ”€â”€ src/main/java/com/shiwu/
â”‚   â”œâ”€â”€ user/           # ç”¨æˆ·æ¨¡å—
â”‚   â”œâ”€â”€ product/        # å•†å“æ¨¡å—
â”‚   â”œâ”€â”€ message/        # æ¶ˆæ¯æ¨¡å—
â”‚   â”œâ”€â”€ order/          # è®¢å•æ¨¡å—
â”‚   â”œâ”€â”€ cart/           # è´­ç‰©è½¦æ¨¡å—
â”‚   â”œâ”€â”€ review/         # è¯„ä»·æ¨¡å—
â”‚   â”œâ”€â”€ payment/        # æ”¯ä»˜æ¨¡å—
â”‚   â”œâ”€â”€ admin/          # ç®¡ç†å‘˜æ¨¡å—
â”‚   â””â”€â”€ common/         # å…¬å…±å·¥å…·ç±»
â”œâ”€â”€ src/test/java/      # æµ‹è¯•ä»£ç 
â”œâ”€â”€ API_Documentation.md # å®Œæ•´APIæ–‡æ¡£
â””â”€â”€ README.md          # æœ¬æ–‡ä»¶
```

## ğŸ”§ å¼€å‘å·¥å…·

- **Java**: 8+
- **Maven**: 3.6+
- **Servlet**: 3.1
- **æ•°æ®åº“**: MySQL 8.0
- **æµ‹è¯•æ¡†æ¶**: JUnit 5 + Mockito

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ï¼š
1. **å®Œæ•´APIæ–‡æ¡£**: [API_Documentation.md](./API_Documentation.md)
2. **æµ‹è¯•ç”¨ä¾‹**: `src/test/java/` ç›®å½•
3. **é”™è¯¯ä»£ç å¯¹ç…§è¡¨**: APIæ–‡æ¡£é™„å½•A

---

**ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2023-12-20
